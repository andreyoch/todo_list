(()=>{"use strict";class e{constructor(e){this.projectName=e,this.id=function(){const e=t.getProjects();let n=new Set;for(let t in e)"id"===t&&n.add(e[t]);const o=n.size;let c,a=!0;for(;a;){let e=Math.floor(1e4*Math.random()+1);if(c=n.add(e).size,o!==c)return a=!1,e}}(),this.tasks=[]}}class t{static getProjects(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static addProject(e){const n=t.getProjects();n.push(e),localStorage.setItem("projects",JSON.stringify(n))}static updateProjectName(e,n){e=Number.parseInt(e);const o=t.getProjects();for(let t=0;t<o.length;t++)if(o[t].id===e){o[t].projectName=n;break}localStorage.setItem("projects",JSON.stringify(o))}static removeProject(e){e=Number.parseInt(e);const n=t.getProjects();for(let t=0;t<n.length;t++)if(n[t].id===e){n.splice(t,1);break}localStorage.setItem("projects",JSON.stringify(n))}static getTasks(e){e=Number.parseInt(e);const t=this.getProjects();let n;for(const e of t)for(const t in e)"id"===t&&(n=e.tasks);return n}}function n(e,t){const n=document.createElement("div");n.className="main-page_project project";const o=document.createElement("div");o.className="project_title",o.textContent=e;const d=document.createElement("div");d.className="project_number-of-tasks",d.textContent="Tasks: 0";const l=document.createElement("div");l.className="project_btns";const r=document.createElement("button");r.className="edit-btn",r.textContent="Edit";const i=document.createElement("button");i.className="remove-btn",i.textContent="Remove",l.append(r,i),r.addEventListener("click",c),i.addEventListener("click",a);const m=document.createElement("div");m.textContent=t,m.className="project-id",n.append(o,d,l,m);const p=n.querySelector(".project_btns");return n.addEventListener("mouseenter",(()=>{p.style="display: block",n.style="height: 140px"})),n.addEventListener("mouseleave",(()=>{p.style="display: none",n.style="height: 98px"})),o.addEventListener("click",s),n}function o(e){document.querySelector(".main-page_row").append(e)}function c(e){const n=document.querySelector(".edit-modal-window_btn"),o=document.querySelector(".edit-modal-window"),c=e.target.parentElement.parentElement,a=c.querySelector(".project_title"),s=document.querySelector(".edit-modal-window_name-field");s.value=a.textContent,o.style="display:block",n.addEventListener("click",(()=>{a.textContent=s.value;const e=c.querySelector(".project-id").textContent;t.updateProjectName(e,s.value),o.style="display:none"}),{once:!0})}function a(e){const n=document.querySelector(".remove-modal-window"),o=e.target.parentElement.parentElement,c=o.querySelector(".project_title").textContent,a=n.querySelector(".remove-project-modal_no-btn"),s=n.querySelector(".remove-project-modal_yes-btn");n.querySelector(".remove-modal-window_title").innerHTML=`Are you sure to delete <br>"${c}" project?`,n.style="display: block",a.addEventListener("click",(()=>n.style="display: none")),s.addEventListener("click",(()=>{const e=o.querySelector(".project-id").textContent;t.removeProject(e),o.remove(),n.style="display: none"}),{once:!0})}function s(e){e.target.parentElement.querySelector(".project-id").textContent,t.getTasks();const n=document.querySelector(".main-page"),o=document.querySelector(".project-page");n.style="display: none",o.style="display: block"}!function(){const e=document.querySelector(".burger-icon"),t=document.querySelector(".mobile-menu-window");e.addEventListener("click",(()=>{t.classList.toggle("mobile-menu-active")}))}(),function(){const c=document.querySelector(".remove-modal-window"),a=document.querySelector(".edit-modal-window"),s=a.querySelector(".edit-modal-close"),d=c.querySelector(".remove-modal-close"),l=document.querySelector(".main-page_add-project-btn"),r=document.querySelector(".main-page_add-project-modal"),i=r.querySelector(".add-modal-window_name-field"),m=r.querySelector(".create-modal-window_btn"),p=document.querySelector(".project-page_modal-window"),u=document.querySelector(".project-page_add-task-btn"),y=document.querySelector(".add-task-modal-close");s.addEventListener("click",(()=>a.style="display: none")),d.addEventListener("click",(()=>c.style="display: none")),y.addEventListener("click",(()=>{p.style="display:none"})),l.addEventListener("click",(()=>{r.style="display: block",m.addEventListener("click",(()=>{const c=i.value;i.value="";let a=new e(c);t.addProject(a),o(n(c,a.id)),r.style="display: none"}),{once:!0})})),u.addEventListener("click",(()=>{p.style="display:block"})),window.addEventListener("click",(e=>{"main-page_edit-project-modal-window edit-modal-window modal-window"===e.target.className&&(a.style="display: none")})),window.addEventListener("click",(e=>{"main-page_remove-project-modal-window remove-modal-window modal-window"===e.target.className&&(c.style="display: none")})),window.addEventListener("click",(e=>{"main-page_add-project-modal modal-window"===e.target.className&&(r.style="display: none")})),window.addEventListener("click",(e=>{"project-page_modal-window modal-window"===e.target.className&&(p.style="display: none")}))}();const d=document.querySelectorAll(".project");d.forEach((e=>e.addEventListener("mouseenter",(t=>{const n=e.querySelector(".project_btns");e.style="height: 140px",n.style="display: block"})))),d.forEach((e=>e.addEventListener("mouseleave",(t=>{const n=e.querySelector(".project_btns");e.style="height: 98px",n.style="display: none"})))),t.getProjects().forEach((e=>o(n(e.projectName,e.id))));const l=document.querySelector(".expand-icon");l.addEventListener("click",(e=>{l.classList.toggle("expand-icon-expanded");const t=e.target.parentElement.parentElement.parentElement;t.classList.toggle("expanded-task"),document.querySelector(".task-expanded_content-normal").classList.toggle("task-expanded_content-expanded"),document.querySelector(".task_upper-elements-row").classList.toggle("task_upper-elements-expanded"),l.addEventListener("click",(()=>{l.classList.toggle("expand-icon-normal"),t.classList.toggle("decreaseHeight")}),{once:!0})}));const r=function(e,t,n){const o=document.createElement("div");o.className="task";const c=document.createElement("div");c.className="task_upper-elements-row";const a=document.createElement("input");a.type="checkbox",a.className="task_checkbox";const s=document.createElement("div");s.className="task_title",s.textContent="MyTask";const d=document.createElement("div");d.className="task-priority-line",s.append(d);const l=document.createElement("div");l.className="task_priority-block";const r=document.createElement("div");r.className="img-container";const i=document.createElement("img");i.className="expand-icon",i.src="img/expand.png",i.alt="expand-icon",r.append(i),c.append(a,s,l,r);const m=document.createElement("div");m.className="task-expanded_content-normal";const p=document.createElement("textarea");p.className="task-expanded_description",p.setAttribute("disabled","disabled"),p.textContent=19;const u=document.createElement("div");u.className="task-expanded_due-date",u.textContent=void 0;const y=document.createElement("div");y.className="task-expanded_btns-row";const g=document.createElement("div");g.className="task_expanded-edit-btn task-expanded_btn",g.textContent="Edit";const k=document.createElement("div");k.className="task_expanded-remove-btn task-expanded_btn",k.textContent="Remove",y.append(g,k);const v=document.createElement("span");return v.className="task_id",m.append(p,u,y),o.append(c,m,v),r.addEventListener("click",(e=>{r.classList.toggle("expand-icon-expanded"),o.classList.toggle("expanded-task"),m.classList.toggle("task-expanded_content-expanded"),c.classList.toggle("task_upper-elements-expanded"),r.addEventListener("click",(()=>{r.classList.toggle("expand-icon-normal"),o.classList.toggle("decreaseHeight")}),{once:!0})})),a.addEventListener("click",(()=>{o.classList.toggle("completed-task"),l.classList.toggle("completed-task-task-priority"),d.classList.toggle("completed-task-task-priority")})),o}();var i;console.log(r),i=r,document.querySelector(".project-page_row").append(i)})();