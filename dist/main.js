(()=>{"use strict";class e{constructor(e){this.projectName=e,this.id=o(),this.tasks=[]}}class t{static getProjects(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static addProject(e){const n=t.getProjects();n.push(e),localStorage.setItem("projects",JSON.stringify(n))}static updateArrayOfProjects(e){localStorage.setItem("projects",JSON.stringify(e))}static updateProjectName(e,n){e=Number.parseInt(e);const o=t.getProjects();for(let t=0;t<o.length;t++)if(o[t].id===e){o[t].projectName=n;break}localStorage.setItem("projects",JSON.stringify(o))}static updateProjectInfo(e,t){e=Number.parseInt(e);const n=this.getProjects();for(let o of n)for(const a in o)if("id"===a){if(e!==o.id)continue;{const e=n.indexOf(o);n.splice(e,1),n.push(t),this.updateArrayOfProjects(n)}}}static removeProject(e){e=Number.parseInt(e);const n=t.getProjects();for(let t=0;t<n.length;t++)if(n[t].id===e){n.splice(t,1);break}localStorage.setItem("projects",JSON.stringify(n))}static getTasks(e){e=Number.parseInt(e);const t=this.getProjects();let n;for(const o of t)for(const t in o)if("id"===t){if(e!==o.id)continue;n=o.tasks}return n}static updateTasksArray(e,n){e=Number.parseInt(e);const o=t.getProjects();for(let t of o)for(const o in t)"id"===o&&e===t.id&&(t.tasks=n,this.updateProjectInfo(e,t))}}class n{constructor(e,t,n,a){this.name=e,this.description=t,this.dueDate=n,this.priority=a,this.taskId=o()}}function o(){const e=t.getProjects();let n=new Set;for(let t in e)"id"===t&&n.add(e[t]);const o=n.size;let a,c=!0;for(;c;){let e=Math.floor(1e4*Math.random()+1);if(a=n.add(e).size,o!==a)return c=!1,e}}function a(e,t){const n=document.createElement("div");n.className="main-page_project project";const o=document.createElement("div");o.className="project_title",o.textContent=e;const a=document.createElement("div");a.className="project_number-of-tasks",a.textContent="Tasks: 0";const c=document.createElement("div");c.className="project_btns";const l=document.createElement("button");l.className="edit-btn",l.textContent="Edit";const i=document.createElement("button");i.className="remove-btn",i.textContent="Remove",c.append(l,i),l.addEventListener("click",s),i.addEventListener("click",r);const m=document.createElement("div");m.textContent=t,m.className="project-id",n.append(o,a,c,m);const p=n.querySelector(".project_btns");return n.addEventListener("mouseenter",(()=>{p.style="display: block",n.style="height: 140px"})),n.addEventListener("mouseleave",(()=>{p.style="display: none",n.style="height: 98px"})),o.addEventListener("click",d),n}function c(e){document.querySelector(".main-page_row").append(e)}function s(e){const n=document.querySelector(".edit-modal-window_btn"),o=document.querySelector(".edit-modal-window"),a=e.target.parentElement.parentElement,c=a.querySelector(".project_title"),s=document.querySelector(".edit-modal-window_name-field");s.value=c.textContent,o.style="display:block",n.addEventListener("click",(()=>{c.textContent=s.value;const e=a.querySelector(".project-id").textContent;t.updateProjectName(e,s.value),o.style="display:none"}),{once:!0})}function r(e){const n=document.querySelector(".remove-modal-window"),o=e.target.parentElement.parentElement,a=o.querySelector(".project_title").textContent,c=n.querySelector(".remove-project-modal_no-btn"),s=n.querySelector(".remove-project-modal_yes-btn");n.querySelector(".remove-modal-window_title").innerHTML=`Are you sure to delete <br>"${a}" project?`,n.style="display: block",c.addEventListener("click",(()=>n.style="display: none")),s.addEventListener("click",(()=>{const e=o.querySelector(".project-id").textContent;t.removeProject(e),o.remove(),n.style="display: none"}),{once:!0})}function d(e){const n=e.target.parentElement.querySelector(".project-id").textContent,o=t.getTasks(n),a=document.querySelector(".project-page"),c=a.querySelector(".project-id"),s=a.querySelectorAll(".task");c.textContent=n,s.length>1&&s.forEach((e=>e.remove())),o.forEach((e=>{i(l(e.name,e.description,e.dueDate,e.priority))})),document.querySelector(".main-page").style="display: none",a.style="display: block"}function l(e,t,n,o){let a;switch(o){case"green":a="#19de97";break;case"blue":a="#254fe7";break;case"yellow":a="#f0dc27";break;case"purple":a="#6f3ebe";break;case"red":a="#e72525"}const c=document.createElement("div");c.className="task";const s=document.createElement("div");s.className="task_upper-elements-row";const r=document.createElement("input");r.type="checkbox",r.className="task_checkbox";const d=document.createElement("div");d.className="task_title",d.textContent=e;const l=document.createElement("div");l.className="task-priority-line",l.style=`background-color: ${a};`,d.append(l);const i=document.createElement("div");i.className="task_priority-block",i.style=`background-color: ${a};`;const m=document.createElement("div");m.className="img-container";const p=document.createElement("img");p.className="expand-icon",p.src="img/expand.png",p.alt="expand-icon",m.append(p),s.append(r,d,i,m);const u=document.createElement("div");u.className="task-expanded_content-normal";const y=document.createElement("textarea");y.className="task-expanded_description",y.setAttribute("disabled","disabled"),y.textContent=t;const g=document.createElement("div");g.className="task-expanded_due-date",g.textContent=n;const k=document.createElement("div");k.className="task-expanded_btns-row";const v=document.createElement("div");v.className="task_expanded-edit-btn task-expanded_btn",v.textContent="Edit";const E=document.createElement("div");E.className="task_expanded-remove-btn task-expanded_btn",E.textContent="Remove",k.append(v,E);const w=document.createElement("span");return w.className="task_id",u.append(y,g,k),c.append(s,u,w),m.addEventListener("click",(e=>{m.classList.toggle("expand-icon-expanded"),c.classList.toggle("expanded-task"),u.classList.toggle("task-expanded_content-expanded"),s.classList.toggle("task_upper-elements-expanded"),m.addEventListener("click",(()=>{m.classList.toggle("expand-icon-normal"),c.classList.toggle("decreaseHeight")}),{once:!0})})),r.addEventListener("click",(()=>{c.classList.toggle("completed-task"),i.classList.toggle("completed-task-task-priority"),l.classList.toggle("completed-task-task-priority")})),c}function i(e){document.querySelector(".project-page_row").append(e)}!function(){const e=document.querySelector(".burger-icon"),t=document.querySelector(".mobile-menu-window");e.addEventListener("click",(()=>{t.classList.toggle("mobile-menu-active")}))}(),function(){const o=document.querySelector(".remove-modal-window"),s=document.querySelector(".edit-modal-window"),r=s.querySelector(".edit-modal-close"),d=o.querySelector(".remove-modal-close"),m=document.querySelector(".main-page_add-project-btn"),p=document.querySelector(".main-page_add-project-modal"),u=p.querySelector(".add-modal-window_name-field"),y=p.querySelector(".create-modal-window_btn"),g=document.querySelector(".project-page_modal-window"),k=document.querySelector(".project-page_add-task-btn"),v=document.querySelector(".add-task-modal-close"),E=document.querySelector(".create-task-modal-window_btn");r.addEventListener("click",(()=>s.style="display: none")),d.addEventListener("click",(()=>o.style="display: none")),v.addEventListener("click",(()=>{g.style="display:none"})),m.addEventListener("click",(()=>{p.style="display: block",y.addEventListener("click",(()=>{const n=u.value;u.value="";let o=new e(n);t.addProject(o),c(a(n,o.id)),p.style="display: none"}),{once:!0})})),k.addEventListener("click",(()=>{g.style="display: block",E.addEventListener("click",(e=>{const o=e.target.parentElement.parentElement.parentElement.parentElement.querySelector(".project-id").textContent,a=e.target.parentElement.parentElement,c=a.querySelector(".add-task-modal-window_name-field"),s=a.querySelector(".add-task-modal-window_task-description-input"),r=a.querySelector(".add-task-modal_date-input"),d=a.querySelectorAll('input[name="priority-element"]');let m;d.forEach((e=>{e.checked&&(m=e.value)}));const p=c.value,u=s.value,y=r.value,k=new n(p,u,y,m),v=t.getTasks(o);v.push(k),t.updateTasksArray(o,v),c.value="",s.value="",r.value="",d.forEach((e=>e.checked=!1)),g.style="display: none",i(l(p,u,y,m))}),{once:!0})})),window.addEventListener("click",(e=>{"main-page_edit-project-modal-window edit-modal-window modal-window"===e.target.className&&(s.style="display: none")})),window.addEventListener("click",(e=>{"main-page_remove-project-modal-window remove-modal-window modal-window"===e.target.className&&(o.style="display: none")})),window.addEventListener("click",(e=>{"main-page_add-project-modal modal-window"===e.target.className&&(p.style="display: none")})),window.addEventListener("click",(e=>{"project-page_modal-window modal-window"===e.target.className&&(g.style="display: none")}))}();const m=document.querySelectorAll(".project");m.forEach((e=>e.addEventListener("mouseenter",(t=>{const n=e.querySelector(".project_btns");e.style="height: 140px",n.style="display: block"})))),m.forEach((e=>e.addEventListener("mouseleave",(t=>{const n=e.querySelector(".project_btns");e.style="height: 98px",n.style="display: none"})))),t.getProjects().forEach((e=>c(a(e.projectName,e.id))));const p=document.querySelector(".expand-icon");p.addEventListener("click",(e=>{p.classList.toggle("expand-icon-expanded");const t=e.target.parentElement.parentElement.parentElement;t.classList.toggle("expanded-task"),document.querySelector(".task-expanded_content-normal").classList.toggle("task-expanded_content-expanded"),document.querySelector(".task_upper-elements-row").classList.toggle("task_upper-elements-expanded"),p.addEventListener("click",(()=>{p.classList.toggle("expand-icon-normal"),t.classList.toggle("decreaseHeight")}),{once:!0})}));const u=l("MyTask",19);console.log(u),i(u)})();